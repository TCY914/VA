[
  {
    "path": "posts/2022-04-18-takehome1/",
    "title": "Take-home Exercise 1",
    "description": "This is my Take-home Exercise on exploring demographic of Ohio in USA from VAST Challenge 2022.",
    "author": [
      {
        "name": "Joyce Tseng",
        "url": "https://www.linkedin.com/in/joyce-tseng-a7115a1aa/"
      }
    ],
    "date": "2022-04-20",
    "categories": [],
    "contents": "\n\nContents\n1. Overview\n2. Data Preparation\n2.1 Challenges Faced\n2.2 Ways to Overcome\nChallenges\n\n3. Sketch\n4. Step-by-step Description\n4.1 Installing Packages\n4.2 Importing the Dataset\n4.3 Data Wrangling\n4.4 Plot Population\nProportion\n4.5 Plot Education Level\n4.6 Plot Education\nLevel on Different Age\n4.7 Plot the\nMedium of Income by Eduction Level\n4.8 Plot the\nIncome on Age by Eduction Level\n4.9 Insight from\nVisualization\n\n5. Learning Points\n\n1. Overview\nIn this take-home exercise, we will explore and reveal the\ndemographics of Ohio in USA by creating data visualizations with\nggplot2 in R. The data is provided and can be downloaded\nfrom VAST Challenge\n2022. The data visualizations included in this exercise are:\nA population proportion of kids and adults.\nNumbers of education levels in 4 categories: Low, High School or\nCollege, Bachelors and Graduate.\nNumbers of education levels on different age.\nA medium of wage on education levels.\nA distribution of wage on age by education levels.\n2. Data Preparation\n2.1 Challenges Faced\nThe raw data only reveals a boolean value that whether the surveyed\nvolunteers have kids or not without further detailed information such as\ntheir kids’ age for us to identify the population composition.\nThe data of participants’ income contains different timestamp record\nand is also inconsistent between each participants.\nThe default visualization of size order created by\nggplot2 is based on the alphabetical order of categories in\nthe column.\n2.2 Ways to Overcome\nChallenges\nThe legal age of an adult is 18 years old generally in US;\ntherefore, the definition of a kid is a person who is under 18.\nAccording to Forbes\nstudy, the average of first-time mother in USA is from 21 to 26,\nwhile for fathers, it is from 27 to 31. Given this, we can defer that\ntheir kids are already an adult for those participants aged over\n50.\nThe function of summarize() in dplyr package\ncan help us summarize each group to fewer rows. Thus, we can derive the\naverage income of each participants from different timestamp.\nThe relevel() function in R can help us to resort the\nlevels of a factor by sepcifying our expected order on the grouping\nvariables.\n3. Sketch\n\n4. Step-by-step Description\n4.1 Installing Packages\nA list of packages, namely tidyverse,\nplotly, readxl, knitr,\ndplyr, ggplot2, grid would be\nused in this exercise. This code chunk installs the required packages\nand loads them into RStudio environment.\n\n\npackages = c('tidyverse', 'plotly', 'readxl', 'knitr', 'dplyr', 'ggplot2', \n             'grid')\n\nfor(p in packages){\n  if(!require(p, character.only = T)){\n    install.packages(p)\n  }\n  library(p, character.only = T)\n}\n\n\n\n4.2 Importing the Dataset\nData import was accomplished using read_csv() of readxl package,\nwhich is useful for reading csv files into a tibble.\n\n\nparticipants <- read_csv(\"Datasets/Attributes/Participants.csv\")\nFinancialJournal <- read_csv(\"Datasets/Journals/FinancialJournal.csv\")\n\n# Inspecting the structure of every columns in the dataframe\nglimpse(participants)\nglimpse(FinancialJournal)\n\n\n\n4.3 Data Wrangling\nDERIVING NUMBERS OF KIDS AND ADULTS\nTo derive new columns from the existing columns, the\nmutate() of dplyr is used to generate the data\nwith condition function, if_els().\n\n\nparticipants_mutated <- participants %>%\n  mutate(kids = if_else(haveKids == TRUE & age < 50, householdSize - 2, 0)) %>%\n  mutate(adults = if_else(haveKids == TRUE & age < 50, 0, householdSize))\n\n\n\nMERGING THE TWO DATA FRAMES\nBefore combining the separate data frames, the join table is created\nfirst and has calculated the average wage of each participants by\nparticipant ID. The merge() of dplyr is used\nto add a new column, wage, on the original data frame.\n\n\nWage <- FinancialJournal %>%\n  filter(category == \"Wage\") %>%\n  group_by(participantId) %>%\n  select(participantId, amount) %>%\n  summarise(wage = mean(amount))\n\nparticipants_mutated <- merge(x = participants_mutated, \n                              y = Wage[ , c(\"participantId\", \"wage\")], \n                              by = \"participantId\", all.x = TRUE)\n\n\n\n\n\n\n4.4 Plot Population Proportion\nPIVOTTING DATA\nThe column of kids and adults in original data frame are two separate\ncolumns and shows the value of each. This is not a good data structure\nfor ggplot2 to produce the graph, so we use\ngather() function to pivot them into a better structure.\n\n\nPopulation <- participants_mutated %>%\n  select(kids, adults) %>%\n  summarise(kids = sum(kids), adults = sum(adults)) \n\nPopulation <- gather(Population, kids, adults, key = group, value = value)\n\n\n\n\n\n\n\n\n\nPLOTTING THE GRAPH\nTo look at the demographics of a city, the population composition is\nthe first thing that we would like to know and the pie chart is the\nsuitable one to plot, which is mainly used for displaying the proportion\nin a variable.\nA graph was plotted using ggplot2 as follows:\ngeom_label is used to show the value of each group.\ngeom_text is used to display and calculate the percentage\nof each group.\n\n\nggplot(Population, aes(x=\"\", y=value, fill=group)) +\n  geom_bar(stat=\"identity\", width=1, color=\"white\") +\n  coord_polar(\"y\", start=0) +\n  theme_void() +\n  geom_label(aes(label = value), \n             position = position_stack(vjust = 0.5), \n             show.legend = FALSE) +\n  geom_text(aes(label = paste(round(value / sum(value) * 100, 1), \"%\"), x = 1.3), \n            position = position_stack(vjust = 0.5)) +\n  scale_fill_brewer() +\n  ggtitle(\"Population Composition in Ohio USA\") +\n  theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n4.5 Plot Education Level\nAfter having a quick look at the population, another important factor\nin demographics is people’s education level. The bar graph is to show\nthe difference and the number of people in each category in a descending\norder.\nA graph was plotted using ggplot2 as follows:\nreorder() is to sort the bars by their respective\nfrequencies for better comparison.\ngeom_text() is to show the information of their value and\npercentage.\n\n\nggplot(participants_mutated, aes(x=reorder(educationLevel, \n                                           educationLevel, \n                                           function(x)-length(x)))) +\n  geom_bar(fill = \"lightsteelblue1\") +\n  ylim(0, 580) +\n  geom_text(stat=\"count\", \n      aes(label=paste0(..count.., \", \", \n      round(..count../sum(..count..)*100, 1), \"%\")), vjust=-1) +\n  ylab(\"No. of\\nParticipants\") +\n  theme(axis.title.y=element_text(angle = 0)) +\n  ggtitle(\"Population Distribution on Education Level\") +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  theme(axis.title.x=element_blank())\n\n\n\n\n4.6 Plot Education Level\non Different Age\nWe would like to see further that the distribution of people in\ndifferent age in each education level, we also put the background data\nthat sums up the number of people in different age.\nA graph was plotted using ggplot2 as follows:\nfactor() of Base R function can help resort the levels of a\nfactor by our expected order.\nCreating the data_bg is to reveal the distribution of age\nby education level with reference to all participants.\nfacet_wrap() is created to display numbers of people by a\ndiscrete variable, education level, on different age.\n\n\nparticipants_mutated$educationLevel = \n  factor(participants_mutated$educationLevel,\n         levels=c('Low','HighSchoolOrCollege','Bachelors','Graduate'))\n\ndata <- participants_mutated\ndata_bg <- data[, -5]\n\nggplot(data, aes(x = age, fill = educationLevel)) +\n  geom_histogram(data = data_bg, fill = \"grey\", alpha = .5) + \n  geom_histogram(colour = \"white\") +\n  facet_wrap(.~ educationLevel) +\n  guides(fill = FALSE) +  \n  theme_bw() +\n  theme(strip.background = element_rect(fill=\"beige\")) +\n  xlab(\"Age\") +\n  theme(axis.title.x = element_text(angle = 0)) +\n  theme(axis.title.y = element_blank()) +\n  ggtitle(\"Numbers of People in Different Age in Each Education Level\") +\n  theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n4.7 Plot the Medium\nof Income by Eduction Level\nThe boxplot is a way to compare multiple data distributions, since\nthey can be placed side by side by a discrete variable. Here we would\nlike use box plot to see the financial conditions of each participants\nby education level.\nA graph was plotted using ggplot2 as follows:\nThe medium value is added by using the geom_() function\nwith stat=summary and respective function in\nfun.y.\n\n\nggplot(data, aes(x = educationLevel, y = wage)) +\n  geom_boxplot() +\n  geom_point(stat=\"summary\",\n             fun.y=\"medium\",\n             colour =\"red\",\n             size = 1.5) +\n  ylab(\"Wage\\n(USD)\") +\n  theme(axis.title.y=element_text(angle = 0)) +\n  theme(axis.title.x=element_blank())  +\n  ggtitle(\"The Medium of Income by Education Level\") +\n  theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n4.8 Plot the Income on\nAge by Eduction Level\nSince the age is also a factor to affect one’s income, we use the\nscatterplot to present, helping us easily observe the value of each\npoint in two axes.\nA graph was plotted using ggplot2 as follows:\nfacet_grid() instead of facet_wrap() is to better\ncompare the value from discrete variables on the matrix of panels in one\nrow.\n\n\nggplot(participants_mutated,\n       aes(x = age, y = wage, colour = factor(educationLevel))) +\n  geom_point(size = 1) + \n  facet_grid(.~ educationLevel, scales = \"free\") +\n  theme(strip.background = element_rect(fill=\"beige\"))  +\n  guides(colour = FALSE) +\n  xlab(\"Age\") +\n  theme(axis.title.x = element_text(angle = 0)) +\n  ylab(\"Wage\\n(USD)\") +\n  theme(axis.title.y=element_text(angle = 0)) +\n  ggtitle(\"Numbers of People in Different Age in Each Education Level\") +\n  theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n4.9 Insight from Visualization\nFrom the plot, we can describe that the education level in Ohio is\nhigh. Almost 40% of people graduated from bachelor and even higher and\nover 50% of people go to work after studying in high school and college.\nIn general, higher education level would result in higher income. The\nboxplot above has verified this and delivers the same information. The\nvalue of medium becomes higher from high school or college to graduate.\nAlthough the medium of low education level is higher than others, the\npercentage is too small (less than 10%) and the spread of wage is large.\nWe would not say people would have higher income if only in low\neducation level. However, the scatterplot tells us that the income for\nthe majority of people are under 250 dollars no matter the education\nlevel. Therefore, we can obtain that those whose income are over 250\ndollars in Ohio belongs to higher class.\n5. Learning Points\nThis take-home exercise provides a great opportunity to get\nfamiliarized with how to clean data and make the visualization by R\npackages, especially using tidyverse and\nggplot2 and their extensions.\nMy key takeaways are:\nAlways plan first before writing the code. A good visualization does\nnot just plot a graph and mark the label there but also the information\nbehind. This is a kind of storytelling for the audience to understand\nwhat you would like to deliver from the graph. To convince others of our\nfindings, a logical plan is necessary!\nRemember the principle of ‘Garbage in, garbage out.’ This means that\na data preparation for needed variables must be done properly before\nclear and meaningful visualizations are built no matter using R, Python\nor Tableau.\n\n\n\n",
    "preview": "posts/2022-04-18-takehome1/takehome1_files/figure-html5/unnamed-chunk-9-1.png",
    "last_modified": "2022-05-02T17:24:05+08:00",
    "input_file": {}
  }
]
